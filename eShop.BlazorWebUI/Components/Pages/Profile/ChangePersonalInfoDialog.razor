<MudDialog Class="pa-1" Style="width: 30vw;">
    <TitleContent>
        <MudText Typo="Typo.h6">Change personal data</MudText>
    </TitleContent>
    <DialogContent>
        <EditForm Context="formContext" OnValidSubmit="SaveChanges" Model="Model" FormName="change-personal-data-form">
            <DataAnnotationsValidator />
            <MudTextField @bind-Value="Model.FirstName" Label="First Name" For="@(() => Model.FirstName)" Variant="Variant.Outlined" />
            <MudTextField @bind-Value="Model.LastName" Label="Last Name" For="@(() => Model.LastName)" Variant="Variant.Outlined" />
            <MudTextField @bind-Value="Model.MiddleName" Label="Middle Name" For="@(() => Model.MiddleName)" Variant="Variant.Outlined" />
            <MudTextField @bind-Value="Model.Email" Label="Email" For="@(() => Model.Email)" Variant="Variant.Outlined" />
            <MudTextField @bind-Value="Model.PhoneNumber" Label="Phone Number" For="@(() => Model.PhoneNumber)" Variant="Variant.Outlined" />
            <MudTextField @bind-Value="Model.Gender" Label="Gender" For="@(() => Model.Gender)" Variant="Variant.Outlined" />
            <MudDatePicker @ref=@DatePicker @bind-Data="@Model.DateOfBirth" Label="Date of Birth" For="@(() => Model.DateOfBirth)" Variant="Variant.Outlined" />

            <MudGrid Justify="Justify.FlexEnd" Class="mt-3">
                <MudItem>
                    <MudButton Variant="Variant.Outlined" Color="Color.Success" StartIcon="@Icons.Material.Filled.Save" ButtonType="ButtonType.Submit"> Save Changes </MudButton>
                    <MudButton Variant="Variant.Outlined" Color="Color.Error" StartIcon="@Icons.Material.Filled.Close" OnClick="OnClose"> Close </MudButton>
                </MudItem>
            </MudGrid>
        </EditForm>
    </DialogContent>
</MudDialog>

<style>
    .blured {
        backdrop-filter: blur(10px);
    }
</style>

@code {
    [CascadingParameter] MudDialogInstance MudDialog { get; set; }
    private MudDatePicker DatePicker { get; set; }
    private PersonalInformationDto Model { get; set; }

    void OnClose() => MudDialog.Close();
    void SaveChanges()
    {
        Model.DateOfBirth = DatePicker.Date;
    }

    protected async override Task OnInitializedAsync()
    {
        DatePicker = new();
        Model = new();
    }
}
