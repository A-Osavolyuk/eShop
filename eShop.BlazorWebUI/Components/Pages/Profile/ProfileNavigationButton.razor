@using System.Text
@inject NavigationManager NavigationManager

<MudButton ButtonType="ButtonType.Button" Color="Color.Primary" Size="Size.Large" Style="height: 80px"
FullWidth OnClick="@(OnNavigation)"
           Variant="@(IsOnPage ? Variant.Filled : Variant.Outlined)" StartIcon="@StartIcon">
    @Label
</MudButton>

@code {
    [Parameter] public string PageUri { get; set; } = string.Empty;
    [Parameter] public string StartIcon { get; set; } = string.Empty;
    [Parameter] public string Label { get; set; } = string.Empty;

    private string CurrentPageUri { get; set; } = string.Empty;
    private bool IsOnPage { get; set; } = false;

    protected override void OnInitialized()
    {
        SetCurrentPageUri();
    }

    private void OnNavigation()
    {
        SetCurrentPageUri();
        NavigationManager.NavigateTo(PageUri, true);
    }

    private void SetCurrentPageUri()
    {
        var sb = new StringBuilder(NavigationManager.Uri);
        sb.Replace(NavigationManager.BaseUri, "/");
        CurrentPageUri = sb.ToString();

        IsOnPage = CurrentPageUri.Equals(PageUri);
    }
}
